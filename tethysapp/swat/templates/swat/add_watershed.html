{% extends "swat/base.html" %}
{% load staticfiles %}
{% load tethys_gizmos %}

{% block import_gizmos %}
    {% import_gizmo_dependency plotly_view %}
{% endblock %}

{% block styles %}
{{ block.super }}
<link rel="stylesheet" href="https://openlayers.org/en/v4.3.1/css/ol.css" type="text/css">
<link rel="stylesheet" href="https://openlayers.org/en/v4.6.5/css/ol.css" type="text/css">
<link href="https://gitcdn.github.io/bootstrap-toggle/2.2.2/css/bootstrap-toggle.min.css" rel="stylesheet">
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/css/bootstrap-datepicker3.css" rel="stylesheet"/>
{% endblock %}

{% block global_scripts %}
{{block.super}}
<script src="https://openlayers.org/en/v4.3.1/build/ol.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/1.3.4/chroma.min.js"></script>
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://gitcdn.github.io/bootstrap-toggle/2.2.2/js/bootstrap-toggle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.6.4/js/bootstrap-datepicker.js"></script>
{% endblock %}

{% block header_buttons %}
  <div class="header-button glyphicon-button" data-toggle="tooltip" data-placement="bottom" title="How-to">
    <a data-toggle="modal" data-target="#help-modal"><span class="glyphicon glyphicon-question-sign"></span></a>
  </div>
{% endblock %}

{% block app_navigation_items %}
    <li class="title">App Navigation</li>
    <li><a href="{% url 'swat:home' %}">View Map</a></li>
{% endblock %}

{% block app_content %}

    <div class="form-container">
        <form class="form" method="post" enctype="multipart/form-data" action="../upload/">
            {% csrf_token %}
            <h6> <strong>Watershed name: </strong>{{ watershedform.watershed_name }}</h6>
            <!--<div id="watershed_name" class="form_text"></div>-->
            <h6><strong>Streams shapefile (.zip):</strong>{{ watershedform.streams_shapefile }}</h6>
            <!--<div id="streams_shapefile" class="form_file"></div>-->
            <h6><strong>Basins shapefile (.zip):</strong>{{ watershedform.basins_shapefile }}</h6>
            <!--<div id="basins_shapefile" class="form_file"></div>-->
            <h6><strong>Monthly .rch file:</strong>{{ watershedform.monthly_rch_file }}</h6>
            <!--<div id="monthly_rch_file" class="form_file"></div>-->
            <h6><strong>Daily .rch file:</strong>{{ watershedform.daily_rch_file }}</h6>
            <!--<div id="daily_rch_file" class="form_file"></div>-->
            <br>
            <button type="submit">Upload</button>
        </form>
    </div>
    <div class="instructions-container">
        <h6><strong>Watershed Name:</strong></h6>
            <p>- Specify the name of the watershed you would like to upload</p>
        <h6><strong>Streams shapefile:</strong></h6>
            <p>- Select the .zip file containing the .dbf, .prj, .shp, and .shx files for the streams used in the SWAT Model</p>
            <p>- Each of the four files and the zip file should be named as follows: <strong>[your_watershed_name]-reach.[extension]</strong></p>
        <h6><strong>Basins shapefile:</strong></h6>
            <p>- Select the .zip file containing the .dbf, .prj, .shp, and .shx files for the subbasins shapefile used in the SWAT Model</p>
            <p>- Each of the four files and the zip file should be named as follows: <strong>[your_watershed_name]-subbasin.[extension]</strong></p>
        <h6><strong>Monthly .rch file:</strong></h6>
            <p>- Select the monthly .rch SWAT output file</p>
        <h6><strong>Daily .rch file:</strong></h6>
            <p>- Select the daily .rch SWAT output file</p>
    </div>

{% endblock %}

{# Use the after_app_content block for modals #}
{% block after_app_content %}
  <!-- How-To Modal-->
  <div class="modal fade" id="help-modal" tabindex="-1" role="dialog" aria-labelledby="help-modal-label">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
          <h5 class="modal-title" id="help-modal-label">SWAT Data Viewer - How-to</h5>
        </div>
        <div class="modal-body">
          <p>
            <ol>
              <li>Select the parameter that you want to view from the "Select Parameter" drop down menu</li>
              <li>Select the date that you want the time-series to start with in the "Select Start Date" date picker</li>
              <li>Select the date that you want the time-series to start with in the "Select End Date" date picker</li>
              <li>Select a stream on the map and click the "View Time-Series" button</li>
            </ol>
          </p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>



  <!--Upload Custom Watershed Modal-->
  <div class="modal fade" id="upload-modal" tabindex="-1" role="dialog" aria-labelledby="upload-modal-label">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h4>Watershed Upload</h4>
          <!--<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>-->
        </div>
        <div class="modal-body">
          <div class="form-container">
            <form class="form" method="post" enctype="multipart/form-data" action="../upload/">
              {% csrf_token %}
              {{ watershedform.as_p }}
              <input type="submit" value="Submit">
            </form>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-primary" data-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>
{% endblock %}

{% block app_actions %}
{% endblock %}